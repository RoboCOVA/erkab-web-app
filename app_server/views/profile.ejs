<!DOCTYPE html>
<!--[if lt IE 9 ]>
<html class="no-js oldie" lang="en"> <![endif]-->
<!--[if IE 9 ]>
<html class="no-js oldie ie9" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>

    <!--- basic page needs
   ================================================== -->
    <meta charset="utf-8">
    <title><%= user.firstName %>'s Account - Erkab</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- mobile specific metas
   ================================================== -->
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>

    <!-- CSS
   ================================================== -->
    <link rel="stylesheet" href="/public/css/base.css">
    <link rel="stylesheet" href="/public/css/bootstrap.css">
    <link rel="stylesheet" href="/public/css/main.css">
    <link rel="stylesheet" href="/public/css/erkab.css">

    <!-- script
   ================================================== -->
    <script src="/public/js/modernizr.js"></script>

    <!-- favicons
	================================================== -->
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.ico" type="image/x-icon">

</head>

<body>

<!-- Trip Summary (Ride info) Modal -->
<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title main-title uppercase">Trip Summary - 02/12/2017</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <p><strong>Fare:</strong> 16EGP <br> <strong>Distance:</strong> 13KM <br> <strong>Pickup Point:</strong>
                    McDonald's Stanley <br> <strong>Driver:</strong> Ahmed K. <br> <strong>Car Model:</strong> Toyota
                    Corolla <br> <strong>Color:</strong> Silver <br> <strong>License No:</strong> 321 SLA</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<% include templates/header.ejs %>

<!-- START OF CHANGEABLE VIEW -->
<div id="changeableView" class="container-fluid">

    <h1 class="container text-center uppercase main-title title-margin"><%= user.firstName %>'s Account</h1>
    <div class="row">

        <div class="col-xs-12 col-sm-8 col-sm-push-4">

            <div class="sticky-div">
                <h3 class="main-title uppercase text-center"><i class="fa fa-suitcase"></i> Your Trips</h3>
                <hr class="edit-profile-hr">
            </div>

            <table class="table table-hover text-center">
                <thead class="thead">
                <tr>
                    <th>#</th>
                    <th><i title="User Type" class="fa fa-user"></i></th>
                    <th><i title="Location" class="fa fa-map-marker"></i></th>
                    <th><i title="Date" class="fa fa-calendar"></i></th>
                    <th><i title="Time" class="fa fa-clock-o"></i></th>
                </tr>
                </thead>
                <tbody class="text-center">
                <% if(person.rideHistory.length > 0) {
                for(var i = 0; i < person.rideHistory.length; i++) { %>
                <tr class='clickable-row' data-toggle="modal" data-target="#myModal" data-backdrop="true"
                    style="cursor:pointer">
                    <th scope="row" class="text-center"><%= i + 1 %></th>
                    <td class="text-center"><%= person.rideHistory[i].userType %></td>
                    <td class="text-center"><%= person.rideHistory[i].area %></td>
                    <td class="text-center"><%= person.rideHistory[i].date %></td>
                    <td class="text-center"><%= person.rideHistory[i].time %></td>
                </tr>
                <% } %>
                <% } else { %>
                <td colspan="5" class="text-center"><i class="fa fa-exclamation-circle"></i> No ride data available.
                </td>
                <% } %>
                </tbody>
            </table>
        </div>

        <!-- edit form column -->
        <div class="col-xs-12 col-sm-4 col-sm-pull-8 text-center edit-profile-col">
            <div class="sticky-div edit-profile-sticky-div">
                <h3 id="profileH3" class="main-title uppercase text-white"><i class="fa fa-user-circle-o"></i> Profile
                </h3>
                <hr class="edit-profile-hr">
            </div>
            <form action="/profile" method="post">
                <label class="text-white uppercase">First Name</label><br>
                <input name="firstName" type="text" class="input-margin-auto profileInput"
                       value="<%= user.firstName %>">
                <br>

                <label class="text-white uppercase">Last Name</label><br>
                <input name="lastName" type="text" class="input-margin-auto profileInput"
                       value="<%= user.lastName %>">
                <br>

                <label class="text-white uppercase">Mobile Number</label><br>
                <!-- Should send verification message. -->
                <input name="mobileNum" type="tel" class="input-margin-auto profileInput"
                       value="<%= user.mobileNum %>">
                <br>
                
                <!-- Email uneditable -->
                <label class="text-white uppercase">Email</label><br>
                <input type="email" class="input-margin-auto readonly-input" value="<%= user.email %>" readonly>
                <br>

                <!-- College ID uneditable -->
                <label class="text-white uppercase">College ID</label><br>
                <input name="collegeId" type="number" class="input-margin-auto readonly-input"
                       value="<%= user.collegeId %>" readonly>
                <br>
                <!-- Should validate old and new password to see if they match onblur/onsubmit -->
                <div id="passwordField">
                    <label class="text-white te">.....</label><br>
                    <label id="oldPasswordLbl" class="text-white uppercase">Old Password</label><br>
                    <input id="oldPasswordInput" name="oldPassword" type="password" class="input-margin-auto">
                    <br>
                    <label id="newPasswordLbl" class="text-white uppercase">New Password</label><br>
                    <input id="newPasswordInput" name="newPassword" type="password" class="input-margin-auto">
                    <br>
                </div>

                <div id="save-cancel-btn-group" class="btn-group" role="group">
                    <button id="saveBtn" type="submit" class="btn btn-outline-warning uppercase">Save Changes</button>
                    <button id="cancelBtn" type="reset" class="btn btn-outline-danger uppercase"><i
                                class="fa fa-ban"></i></button>
                </div>
                <button id="editBtn" type="button" class="btn btn-outline-warning uppercase"><i
                            class="fa fa-pencil-square-o"></i> Edit
                </button>
            </form>
        </div>
    </div>
</div>

<!-- END OF CHANGEABLE VIEW -->

<% include templates/preloader.ejs %>

<!-- Java Script
================================================== -->
<script src="/public/js/jquery-2.1.3.min.js"></script>
<script src="/public/js/main.js"></script>
<script src="/public/js/bootstrap.min.js"></script>
<script src="/public/js/editProfile.js"></script>

</body>
</html>